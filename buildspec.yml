version: 0.2

phases:
  install:
    commands:
      - echo "Installing Java and Maven..."
      - yum install -y java-17-amazon-corretto maven
      - export JAVA_HOME="/usr/lib/jvm/java-17-amazon-corretto"
      - export PATH=$JAVA_HOME/bin:$PATH
      - java -version
      - mvn -version

  pre_build:
    commands:
      - echo "Installing dependencies..."
      - export JAVA_HOME="/usr/lib/jvm/java-17-amazon-corretto"
      - export PATH=$JAVA_HOME/bin:$PATH
      - echo "JAVA_HOME is set to: $JAVA_HOME"
      - mvn clean install

  build:
    commands:
      - echo "Building application..."
      - mvn package

  post_build:
    commands:
      - echo "Build completed successfully."
